{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import NavBar from'../NavBar';import{useParams}from\"react-router\";import'../App.css';/* eslint-disable */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Gidas(){var _state$gidai,_state$gidai2;var history=useHistory();var _useParams=useParams(),id=_useParams.id;var token=localStorage.getItem('auth_token');var usrid=localStorage.getItem('user_id');var _useState=useState(''),_useState2=_slicedToArray(_useState,2),tempSprend=_useState2[0],setTempSprend=_useState2[1];var _useState3=useState({gidai:null}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setData=_useState4[1];var _useState5=useState({simptomai:null}),_useState6=_slicedToArray(_useState5,2),simptomas=_useState6[0],setSimptomai=_useState6[1];var _useState7=useState({problemos:null}),_useState8=_slicedToArray(_useState7,2),problema=_useState8[0],setProblemos=_useState8[1];var _useState9=useState({mechanikai:[]}),_useState10=_slicedToArray(_useState9,2),mechanikai=_useState10[0],setMechanikai=_useState10[1];var _useState11=useState({automobiliai:null}),_useState12=_slicedToArray(_useState11,2),automobilis=_useState12[0],setAuto=_useState12[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var apia,apis,apip,apim,api;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/automobiliai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 2:apia=_context.sent;_context.t0=setAuto;_context.next=6;return apia.json();case 6:_context.t1=_context.sent;_context.t2={automobiliai:_context.t1};(0,_context.t0)(_context.t2);_context.next=11;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/simptomai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 11:apis=_context.sent;_context.t3=setSimptomai;_context.next=15;return apis.json();case 15:_context.t4=_context.sent;_context.t5={simptomai:_context.t4};(0,_context.t3)(_context.t5);_context.next=20;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/problemos\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 20:apip=_context.sent;_context.t6=setProblemos;_context.next=24;return apip.json();case 24:_context.t7=_context.sent;_context.t8={problemos:_context.t7};(0,_context.t6)(_context.t8);_context.next=29;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/mechanikai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 29:apim=_context.sent;_context.t9=setMechanikai;_context.next=33;return apim.json();case 33:_context.t10=_context.sent;_context.t11={mechanikai:_context.t10};(0,_context.t9)(_context.t11);_context.next=38;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\"+id,{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 38:api=_context.sent;_context.t12=setData;_context.next=42;return api.json();case 42:_context.t13=_context.sent;_context.t14={gidai:_context.t13};(0,_context.t12)(_context.t14);case 45:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var findAuto=function findAuto(id){var x=null;if((automobilis===null||automobilis===void 0?void 0:automobilis.automobiliai)!=null){automobilis===null||automobilis===void 0?void 0:automobilis.automobiliai.forEach(function(element){if(element.id===id){x=element.pavadinimas+\" \"+element.marke;if(element.kuras===\"dyzelinas\"){x+=\" (d)\";}else if(element.kuras===\"benzinas\"){x+=\" (b)\";}else{x+=\" (e)\";}}});return x;}else{return'id:'+id;}};var findMechanikas=function findMechanikas(tid){if(\"\"+usrid!==\"\"+tid&&tid!==null){history.push('/gidai');}var x=null;if((mechanikai===null||mechanikai===void 0?void 0:mechanikai.mechanikai)!=null){mechanikai===null||mechanikai===void 0?void 0:mechanikai.mechanikai.forEach(function(element){if(element.id===tid){x=element.name;}});return x;}else{return'id:'+tid;}};var findProblema=function findProblema(id){var x=null;if((problema===null||problema===void 0?void 0:problema.problemos)!=null){problema===null||problema===void 0?void 0:problema.problemos.forEach(function(element){if(element.id===id){x=element.aprasymas;}});return x;}else{return'id:'+id;}};var findSimptoma=function findSimptoma(id){var x=null;if((simptomas===null||simptomas===void 0?void 0:simptomas.simptomai)!=null){simptomas===null||simptomas===void 0?void 0:simptomas.simptomai.forEach(function(element){if(element.id===id){x=element.aprasymas;}});return x;}else{return'id:'+id;}};useEffect(function(){fetchData();},[]);if((state===null||state===void 0?void 0:(_state$gidai=state.gidai)===null||_state$gidai===void 0?void 0:_state$gidai.status)===\"Token is Expired\"){localStorage.removeItem(\"auth_token\");localStorage.removeItem(\"user_name\");localStorage.removeItem(\"user_role\");localStorage.removeItem(\"user_email\");history.push('/prisijungimas');return null;}var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(JSON.stringify({'sprendimas':tempSprend}));fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\"+id,{method:'put',headers:new Headers({'Content-Type':'application/json','Authorization':'Bearer'+token}),body:JSON.stringify({'sprendimas':tempSprend})});};function deleteGidas(_x){return _deleteGidas.apply(this,arguments);}function _deleteGidas(){_deleteGidas=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var apim;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\"+id,{method:'delete',headers:new Headers({'Authorization':'Bearer'+token})});case 2:apim=_context2.sent;history.push('/gidai');case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteGidas.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Redaktorius\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:state===null||state===void 0?void 0:(_state$gidai2=state.gidai)===null||_state$gidai2===void 0?void 0:_state$gidai2.map(function(data){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3 \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-4 col-form-label text-md-right\",children:\"Autorius:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{readOnly:true,className:\"form-control\",type:\"text\",value:findMechanikas(data.mechanikas_id)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-4 col-form-label text-md-right\",children:\"Automobilis:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{readOnly:true,className:\"form-control\",type:\"text\",value:findAuto(data.automobilis_id)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3 \",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-4 col-form-label text-md-right\",children:\"Simptomai:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{readOnly:true,className:\"form-control\",type:\"text\",value:findSimptoma(data.simptomas_id)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-4 col-form-label text-md-right\",children:\"Problemos:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{readOnly:true,className:\"form-control\",type:\"text\",value:findProblema(data.problema_id)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-4 col-form-label text-md-right\",children:\"Sprendimas:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",type:\"text\",required:true,defaultValue:data.sprendimas,onChange:function onChange(e){return setTempSprend(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-0 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 offset-md-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Patvirtinti\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger offset-md-2\",onClick:function onClick(){return deleteGidas(data.id);},children:\"I\\u0161trinti\"})]})})]},data===null||data===void 0?void 0:data.id);})})]})})})})]});}export default Gidas;","map":{"version":3,"sources":["C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/src/Single/GidasEdit.js"],"names":["React","useEffect","useState","useHistory","NavBar","useParams","Gidas","history","id","token","localStorage","getItem","usrid","tempSprend","setTempSprend","gidai","state","setData","simptomai","simptomas","setSimptomai","problemos","problema","setProblemos","mechanikai","setMechanikai","automobiliai","automobilis","setAuto","fetchData","fetch","method","headers","Headers","apia","json","apis","apip","apim","api","findAuto","x","forEach","element","pavadinimas","marke","kuras","findMechanikas","tid","push","name","findProblema","aprasymas","findSimptoma","status","removeItem","handleSubmit","e","preventDefault","console","log","JSON","stringify","body","deleteGidas","map","data","mechanikas_id","automobilis_id","simptomas_id","problema_id","sprendimas","target","value"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState} from \"react\";\nimport { useHistory} from \"react-router-dom\";\nimport NavBar from '../NavBar';\nimport { useParams } from \"react-router\";\nimport '../App.css'\n/* eslint-disable */\nfunction Gidas(){\n    const history = useHistory();\n    const { id } = useParams();\n    const token =  localStorage.getItem('auth_token')\n    const usrid =  localStorage.getItem('user_id')\n\n    const [tempSprend, setTempSprend] = useState('');\n\n    const [state, setData] = useState({\n        gidai: null\n    });\n\n    const [simptomas, setSimptomai] = useState({\n        simptomai: null\n    });\n\n    const [problema, setProblemos] = useState({\n        problemos: null\n    });\n\n    const [mechanikai, setMechanikai] = useState({\n        mechanikai: []\n    });\n\n    const [automobilis, setAuto] = useState({\n        automobiliai: null\n    });\n\n    const fetchData = async () => {\n        const apia = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/automobiliai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setAuto({\n            automobiliai: await apia.json(),\n        });\n\n        const apis = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/simptomai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setSimptomai({\n            simptomai: await apis.json(),\n        });\n\n        const apip = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/problemos\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setProblemos({\n            problemos: await apip.json(),\n        });\n\n        const apim = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/mechanikai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setMechanikai({\n            mechanikai: await apim.json(),\n        });\n\n        const api = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\"+id,{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setData({\n            gidai: await api.json(),\n        });\n    };\n\n \n    const findAuto = (id) => {\n        var x = null;\n        if(automobilis?.automobiliai != null){\n            automobilis?.automobiliai.forEach(element => {\n                if(element.id === id){\n                    x = element.pavadinimas + \" \" + element.marke;\n                    if(element.kuras === \"dyzelinas\"){\n                        x += \" (d)\"\n                    }\n                    else if(element.kuras === \"benzinas\"){\n                        x += \" (b)\"\n                    }\n                    else {\n                        x += \" (e)\"\n                    }\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n\n    const findMechanikas = (tid) => {\n        if(\"\"+usrid !== \"\"+tid && tid !==null){\n            history.push('/gidai')\n        }\n        var x = null;\n        if(mechanikai?.mechanikai != null){\n            mechanikai?.mechanikai.forEach(element => {\n                if(element.id === tid){\n                    x = element.name;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + tid;\n        }\n    }\n\n    const findProblema = (id) => {\n        var x = null;\n        if(problema?.problemos != null){\n            problema?.problemos.forEach(element => {\n                if(element.id === id){\n                    x = element.aprasymas;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n    const findSimptoma = (id) => {\n        var x = null;\n        if(simptomas?.simptomai != null){\n            simptomas?.simptomai.forEach(element => {\n                if(element.id === id){\n                    x = element.aprasymas;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n\n    useEffect(() => {\n        fetchData();\n        }, []);\n\n    if(state?.gidai?.status === \"Token is Expired\"){\n        localStorage.removeItem(`auth_token`)\n        localStorage.removeItem(`user_name`)\n        localStorage.removeItem(`user_role`)\n        localStorage.removeItem(`user_email`)\n        history.push('/prisijungimas')\n        return null;\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        console.log(JSON.stringify({'sprendimas': tempSprend}))\n        fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\" + id,{\n            method: 'put',\n            headers: new Headers({\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer' + token\n            }),\n            body: JSON.stringify({'sprendimas': tempSprend})\n\n        });\n    }\n\n    async function deleteGidas(id){\n        const apim = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\" + id,{\n            method: 'delete',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        history.push('/gidai')\n    }\n\n\n    return (\n        <div>\n            <NavBar />\n        <div className=\"container\">\n            <div className=\"row justify-content-center\">\n                <div className=\"col-md-8\">\n                    <div className=\"card\">\n                        <div className=\"card-header\">Redaktorius</div>\n\n                        <div className=\"card-body\">\n                        {\n                            state?.gidai?.map(data => (\n                        <form onSubmit={handleSubmit} key={data?.id}>\n                        <div className=\"row mb-3 \">    \n                            <label className=\"col-md-4 col-form-label text-md-right\">Autorius:</label>\n                            <div className=\"col-md-6\">\n                            <input readOnly className=\"form-control\"\n                                type=\"text\"\n                                    value={findMechanikas(data.mechanikas_id)}\n                                ></input>\n                                </div>\n                                \n                        </div>\n                        <div className=\"row mb-3\">   \n                            <label className=\"col-md-4 col-form-label text-md-right\">Automobilis: \n                                </label>\n                                <div className=\"col-md-6\">\n                            <input readOnly className=\"form-control\"\n                                type=\"text\"\n                                    value={findAuto(data.automobilis_id)}\n                                ></input>\n                                </div>\n                            \n                        </div>\n                        <div className=\"row mb-3 \">  \n                        <label className=\"col-md-4 col-form-label text-md-right\">Simptomai:  \n                               </label>\n                               <div className=\"col-md-6\">\n                            <input readOnly className=\"form-control\"\n                                type=\"text\"\n                                    value={findSimptoma(data.simptomas_id)}\n                                ></input>\n                                </div>\n                        </div>\n                        <div className=\"row mb-3\">   \n                            <label className=\"col-md-4 col-form-label text-md-right\">Problemos: \n                                </label>\n                                <div className=\"col-md-6\">\n                            <input readOnly className=\"form-control\"\n                                type=\"text\"\n                                    value={findProblema(data.problema_id)}\n                                ></input>\n                                </div>\n                            \n                        </div>\n                        <div className=\"row mb-3\">   \n                            <label className=\"col-md-4 col-form-label text-md-right\">Sprendimas: \n                                </label>\n                                <div className=\"col-md-6\">\n                            <textarea className=\"form-control\"\n                                type=\"text\"\n                                    required\n                                    defaultValue={data.sprendimas}\n                                    onChange={(e) => setTempSprend(e.target.value)}\n                                ></textarea>\n                                </div>\n                            \n                        </div>\n                        <div className=\"row mb-0 \">\n                            <div className=\"col-md-8 offset-md-4\">\n                                <button type=\"submit\" className=\"btn btn-primary\">\n                                    Patvirtinti\n                                </button>\n                                <button className='btn btn-danger offset-md-2' onClick={()=>deleteGidas(data.id)}>Ištrinti</button>\n\n                            </div>\n                        </div>\n                    </form>\n                            ))}\n                </div>\n            </div>\n        </div>\n        </div>\n        </div>\n        </div>\n    );\n}\n\nexport default Gidas;\n"]},"metadata":{},"sourceType":"module"}