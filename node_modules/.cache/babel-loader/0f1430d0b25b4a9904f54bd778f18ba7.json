{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable */import ReactDOM from'react-dom';import React,{useState,useEffect}from\"react\";import{useHistory,Link}from\"react-router-dom\";import NavBar from'../NavBar';import'../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function GidaiList(){var _state$gidai,_state$gidai2;var history=useHistory();var token=localStorage.getItem('auth_token');var role=localStorage.getItem('user_role');var userid=localStorage.getItem('user_id');if(token==null){history.push('/prisijungimas');}var _useState=useState({gidai:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setData=_useState2[1];var _useState3=useState({simptomai:null}),_useState4=_slicedToArray(_useState3,2),simptomas=_useState4[0],setSimptomai=_useState4[1];var _useState5=useState({problemos:null}),_useState6=_slicedToArray(_useState5,2),problema=_useState6[0],setProblemos=_useState6[1];var _useState7=useState({mechanikai:null}),_useState8=_slicedToArray(_useState7,2),mechanikai=_useState8[0],setMechanikai=_useState8[1];var _useState9=useState({automobiliai:null}),_useState10=_slicedToArray(_useState9,2),automobilis=_useState10[0],setAuto=_useState10[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var api,apia,apis,apip,apim;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 2:api=_context.sent;_context.t0=setData;_context.next=6;return api.json();case 6:_context.t1=_context.sent;_context.t2={gidai:_context.t1};(0,_context.t0)(_context.t2);_context.next=11;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/automobiliai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 11:apia=_context.sent;_context.t3=setAuto;_context.next=15;return apia.json();case 15:_context.t4=_context.sent;_context.t5={automobiliai:_context.t4};(0,_context.t3)(_context.t5);_context.next=20;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/simptomai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 20:apis=_context.sent;_context.t6=setSimptomai;_context.next=24;return apis.json();case 24:_context.t7=_context.sent;_context.t8={simptomai:_context.t7};(0,_context.t6)(_context.t8);_context.next=29;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/problemos\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 29:apip=_context.sent;_context.t9=setProblemos;_context.next=33;return apip.json();case 33:_context.t10=_context.sent;_context.t11={problemos:_context.t10};(0,_context.t9)(_context.t11);_context.next=38;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/mechanikai\",{method:'get',headers:new Headers({'Authorization':'Bearer'+token})});case 38:apim=_context.sent;_context.t12=setMechanikai;_context.next=42;return apim.json();case 42:_context.t13=_context.sent;_context.t14={mechanikai:_context.t13};(0,_context.t12)(_context.t14);case 45:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);if((state===null||state===void 0?void 0:(_state$gidai=state.gidai)===null||_state$gidai===void 0?void 0:_state$gidai.status)===\"Token is Expired\"){localStorage.removeItem(\"auth_token\");localStorage.removeItem(\"user_name\");localStorage.removeItem(\"user_role\");localStorage.removeItem(\"user_email\");history.push('/prisijungimas');return null;}var findProblema=function findProblema(id){var x=null;if((problema===null||problema===void 0?void 0:problema.problemos)!=null){problema===null||problema===void 0?void 0:problema.problemos.forEach(function(element){if(element.id===id){x=element.aprasymas;}});return x;}else{return'id:'+id;}};var findSimptoma=function findSimptoma(id){var x=null;if((simptomas===null||simptomas===void 0?void 0:simptomas.simptomai)!=null){simptomas===null||simptomas===void 0?void 0:simptomas.simptomai.forEach(function(element){if(element.id===id){x=element.aprasymas;}});return x;}else{return'id:'+id;}};var findMechanikas=function findMechanikas(id){var x=null;if((mechanikai===null||mechanikai===void 0?void 0:mechanikai.mechanikai)!=null){mechanikai===null||mechanikai===void 0?void 0:mechanikai.mechanikai.forEach(function(element){if(element.id===id){x=element.name;}});return x;}else{return'id:'+id;}};var findAuto=function findAuto(id){var x=null;if((automobilis===null||automobilis===void 0?void 0:automobilis.automobiliai)!=null){automobilis===null||automobilis===void 0?void 0:automobilis.automobiliai.forEach(function(element){if(element.id===id){x=element.pavadinimas+\" \"+element.marke;}});return x;}else{return'id:'+id;}};function deleteGidas(_x){return _deleteGidas.apply(this,arguments);}function _deleteGidas(){_deleteGidas=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var apim;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\"+id,{method:'delete',headers:new Headers({'Authorization':'Bearer'+token})});case 2:apim=_context2.sent;fetchData();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteGidas.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card overflow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Gidai\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Automobilis\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Simptomai\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Problema\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Mechanikas\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:state===null||state===void 0?void 0:(_state$gidai2=state.gidai)===null||_state$gidai2===void 0?void 0:_state$gidai2.map(function(gidas){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:findAuto(gidas===null||gidas===void 0?void 0:gidas.automobilis_id)}),/*#__PURE__*/_jsx(\"td\",{children:findSimptoma(gidas===null||gidas===void 0?void 0:gidas.simptomas_id)}),/*#__PURE__*/_jsx(\"td\",{children:findProblema(gidas===null||gidas===void 0?void 0:gidas.problema_id)}),/*#__PURE__*/_jsx(\"td\",{children:findMechanikas(gidas===null||gidas===void 0?void 0:gidas.mechanikas_id)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:'/gidai/'+gidas.id,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",children:\"Atidaryti\"})})}),role===\"1\"||\"\"+(gidas===null||gidas===void 0?void 0:gidas.mechanikas_id)===userid?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:'/gidai/'+gidas.id+'/koreguoti',children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Koreguoti\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteGidas(gidas.id);},children:\"I\\u0161trinti\"})})]}):/*#__PURE__*/_jsx(_Fragment,{})]},gidas===null||gidas===void 0?void 0:gidas.id);})})]})]})})})})]});}export default GidaiList;if(document.getElementById('gidaiList')){ReactDOM.render(/*#__PURE__*/_jsx(GidaiList,{}),document.getElementById('gidaiList'));}","map":{"version":3,"sources":["C:/Users/simis/Desktop/SaitynaiGit/AutotekReact/autotekreact/src/Lists/GidaiList.js"],"names":["ReactDOM","React","useState","useEffect","useHistory","Link","NavBar","GidaiList","history","token","localStorage","getItem","role","userid","push","gidai","state","setData","simptomai","simptomas","setSimptomai","problemos","problema","setProblemos","mechanikai","setMechanikai","automobiliai","automobilis","setAuto","fetchData","fetch","method","headers","Headers","api","json","apia","apis","apip","apim","status","removeItem","findProblema","id","x","forEach","element","aprasymas","findSimptoma","findMechanikas","name","findAuto","pavadinimas","marke","deleteGidas","map","gidas","automobilis_id","simptomas_id","problema_id","mechanikas_id","document","getElementById","render"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport ReactDOM from 'react-dom';\nimport React, { useState, useEffect} from \"react\";\nimport { useHistory, Link} from \"react-router-dom\";\nimport NavBar from '../NavBar';\nimport '../App.css'\n\n\n\nfunction GidaiList() {\n\n    const history = useHistory();\n    const token = localStorage.getItem('auth_token')\n    const role = localStorage.getItem('user_role')\n    const userid = localStorage.getItem('user_id')\n\n    if(token == null){\n        history.push('/prisijungimas')\n    }\n\n    const [state, setData] = useState({\n        gidai: null\n    });\n\n    const [simptomas, setSimptomai] = useState({\n        simptomai: null\n    });\n\n    const [problema, setProblemos] = useState({\n        problemos: null\n    });\n\n    const [mechanikai, setMechanikai] = useState({\n        mechanikai: null\n    });\n\n    const [automobilis, setAuto] = useState({\n        automobiliai: null\n    });\n\n    const fetchData = async () => {\n        const api = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setData({\n            gidai: await api.json(),\n        });\n\n        const apia = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/automobiliai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setAuto({\n            automobiliai: await apia.json(),\n        });\n\n        const apis = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/simptomai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setSimptomai({\n            simptomai: await apis.json(),\n        });\n\n        const apip = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/problemos\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setProblemos({\n            problemos: await apip.json(),\n        });\n\n        const apim = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/mechanikai\",{\n            method: 'get',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        setMechanikai({\n            mechanikai: await apim.json(),\n        });\n    };\n\n    useEffect(() => {\n        fetchData();\n        }, []);\n\n    if(state?.gidai?.status === \"Token is Expired\"){\n        localStorage.removeItem(`auth_token`)\n        localStorage.removeItem(`user_name`)\n        localStorage.removeItem(`user_role`)\n        localStorage.removeItem(`user_email`)\n        history.push('/prisijungimas')\n        return null;\n    }\n\n    const findProblema = (id) => {\n        var x = null;\n        if(problema?.problemos != null){\n            problema?.problemos.forEach(element => {\n                if(element.id === id){\n                    x = element.aprasymas;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n    const findSimptoma = (id) => {\n        var x = null;\n        if(simptomas?.simptomai != null){\n            simptomas?.simptomai.forEach(element => {\n                if(element.id === id){\n                    x = element.aprasymas;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n\n    const findMechanikas = (id) => {\n        var x = null;\n        if(mechanikai?.mechanikai != null){\n            mechanikai?.mechanikai.forEach(element => {\n                if(element.id === id){\n                    x = element.name;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n\n    const findAuto = (id) => {\n        var x = null;\n        if(automobilis?.automobiliai != null){\n            automobilis?.automobiliai.forEach(element => {\n                if(element.id === id){\n                    x = element.pavadinimas + \" \" + element.marke;\n                }\n            });\n            return x;\n        }\n        else{\n            return 'id:' + id;\n        }\n    }\n\n    async function deleteGidas(id){\n        const apim = await fetch(\"https://autoteksaitynai.azurewebsites.net/api/gidai/\" + id,{\n            method: 'delete',\n            headers: new Headers({\n                'Authorization': 'Bearer' + token\n            })\n        });\n        fetchData();\n    }\n\n    return (\n        <div>\n            <NavBar />\n        <div className=\"container\" >\n            <div className=\"row justify-content-center\">\n                <div className=\"col-md-8\">\n                    <div className=\"card overflow\">\n                        <div className=\"card-header\">Gidai\n                        \n                        </div>\n                        <table className=\"table table-striped\">\n                        <thead>\n                        <tr>\n                        <th scope=\"col\">Automobilis</th>\n                                    <th scope=\"col\">Simptomai</th>\n                                    <th scope=\"col\">Problema</th>\n                                    <th scope=\"col\">Mechanikas</th>\n                                    <th scope=\"col\"></th>\n                                    <th scope=\"col\"></th>\n                                    <th scope=\"col\"></th>\n                                </tr>\n                                </thead>\n                            <tbody>\n                              {\n                                state?.gidai?.map(gidas => (\n                                    \n                                    <tr key={gidas?.id}>\n                                         {<td >{findAuto(gidas?.automobilis_id)}</td>}\n                                        {<td>{findSimptoma(gidas?.simptomas_id)}</td>}\n                                        {<td >{findProblema(gidas?.problema_id)}</td>}\n                                        {<td >{findMechanikas(gidas?.mechanikas_id)}</td>}\n                                        <td ><Link to={'/gidai/'+gidas.id}><button className='btn btn-dark'>Atidaryti</button></Link></td>\n                                        {   \n                                            (role === \"1\" || \"\" + gidas?.mechanikas_id === userid)\n                                            ? (<>\n                                            <td ><Link to={'/gidai/'+gidas.id+'/koreguoti'}><button className='btn btn-primary'>Koreguoti</button></Link></td>\n                                             <td ><button className='btn btn-danger' onClick={()=>deleteGidas(gidas.id)}>Ištrinti</button></td>\n                                             </>)\n                                            :<></>\n\n                                        }\n                                    \n\n\n\n                                </tr>\n                                ))\n                            }\n                            </tbody>\n                            </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </div>\n    );\n}\n\nexport default GidaiList;\n\nif (document.getElementById('gidaiList')) {\n    ReactDOM.render(<GidaiList />, document.getElementById('gidaiList'));\n}\n"]},"metadata":{},"sourceType":"module"}